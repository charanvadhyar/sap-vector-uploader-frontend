# SAP FICO Uploader - Deployment Guide

## üöÄ Deployment Options

### Option 1: Recommended (Split Deployment)
- **Frontend**: Vercel (Next.js optimized)
- **Backend**: Railway (Easy Python deployment)
- **Database**: Railway PostgreSQL

### Option 2: Alternative
- **Frontend**: Netlify
- **Backend**: Render
- **Database**: Render PostgreSQL

## üìã Pre-Deployment Checklist

### 1. Environment Variables Setup

#### Backend (.env)
```bash
# Database
DATABASE_URL=postgresql://user:password@host:port/database

# Authentication
SECRET_KEY=your-super-secret-key-here
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=30

# OpenAI (for embeddings)
OPENAI_API_KEY=your-openai-api-key
```

#### Frontend (.env.production)
```bash
NEXT_PUBLIC_API_BASE_URL=https://your-backend-url.railway.app
NEXT_PUBLIC_APP_NAME=SAP FICO Vector Uploader
NEXT_PUBLIC_APP_VERSION=1.0.0
NODE_ENV=production
```

## üîß Deployment Steps

### Step 1: Deploy Backend (Railway)

1. **Create Railway Account**: https://railway.app
2. **Create New Project** from GitHub repo
3. **Add PostgreSQL Database**:
   - Go to your project dashboard
   - Click "Add Service" ‚Üí "Database" ‚Üí "PostgreSQL"
4. **Configure Environment Variables**:
   - `SECRET_KEY`: Generate a secure random string
   - `OPENAI_API_KEY`: Your OpenAI API key
   - `DATABASE_URL`: Auto-generated by Railway
5. **Deploy**: Railway will automatically deploy from your repo

### Step 2: Deploy Frontend (Vercel)

1. **Create Vercel Account**: https://vercel.com
2. **Import Project** from GitHub
3. **Configure Build Settings**:
   - Framework Preset: Next.js
   - Build Command: `npm run build`
   - Output Directory: `.next`
4. **Add Environment Variables**:
   - `NEXT_PUBLIC_API_BASE_URL`: Your Railway backend URL
   - `NODE_ENV`: production
5. **Deploy**: Vercel will build and deploy automatically

### Step 3: Update CORS Settings

Update your backend's `main.py` CORS origins:
```python
origins = [
    "https://your-frontend-url.vercel.app",  # Your Vercel URL
    "http://localhost:3000",  # Keep for local development
]
```

### Step 4: Database Migration

Your Railway PostgreSQL will be empty. You need to:
1. Run database migrations
2. Create an admin user

## üîí Security Considerations

1. **Environment Variables**: Never commit `.env` files
2. **Secret Keys**: Use strong, randomly generated keys
3. **Database**: Use strong passwords
4. **CORS**: Only allow your frontend domain
5. **HTTPS**: Both services should use HTTPS in production

## üìä Post-Deployment

1. **Test Authentication**: Login/logout functionality
2. **Test File Upload**: Upload and process documents
3. **Test Search**: Vector search functionality
4. **Test Admin Panel**: User management features
5. **Monitor Logs**: Check for any errors

## üõ†Ô∏è Alternative: Docker Deployment

If you prefer Docker:

```bash
# Build and run backend
cd backend
docker build -t sap-fico-backend .
docker run -p 8000:8000 --env-file .env sap-fico-backend

# Build and run frontend
cd ..
docker build -t sap-fico-frontend .
docker run -p 3000:3000 sap-fico-frontend
```

## üìû Support

- Railway: https://docs.railway.app
- Vercel: https://vercel.com/docs
- Next.js: https://nextjs.org/docs
- FastAPI: https://fastapi.tiangolo.com
